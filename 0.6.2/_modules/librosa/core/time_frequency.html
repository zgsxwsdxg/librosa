

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>librosa.core.time_frequency &mdash; librosa 0.6.2 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/banner.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> librosa
          

          
          </a>

          
            
            
              <div class="version">
                0.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../install.html">Installation instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial.html">Tutorial</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../core.html">Core IO and DSP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../display.html">Display</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../feature.html">Feature extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../onset.html">Onset detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../beat.html">Beat and tempo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../decompose.html">Spectrogram decomposition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../effects.html">Effects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../output.html">Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../segment.html">Temporal segmentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sequence.html">Sequential modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../util.html">Utilities</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../filters.html">Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cache.html">Caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ioformats.html">Advanced I/O Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../advanced.html">Advanced examples</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">librosa</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>librosa.core.time_frequency</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  





<h1>Source code for librosa.core.time_frequency</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&#39;&#39;&#39;Time and frequency utilities&#39;&#39;&#39;</span>

<span class="kn">import</span> <span class="nn">re</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">six</span>

<span class="kn">from</span> <span class="nn">..util.exceptions</span> <span class="k">import</span> <span class="n">ParameterError</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;frames_to_samples&#39;</span><span class="p">,</span> <span class="s1">&#39;frames_to_time&#39;</span><span class="p">,</span>
           <span class="s1">&#39;samples_to_frames&#39;</span><span class="p">,</span> <span class="s1">&#39;samples_to_time&#39;</span><span class="p">,</span>
           <span class="s1">&#39;time_to_samples&#39;</span><span class="p">,</span> <span class="s1">&#39;time_to_frames&#39;</span><span class="p">,</span>
           <span class="s1">&#39;note_to_hz&#39;</span><span class="p">,</span> <span class="s1">&#39;note_to_midi&#39;</span><span class="p">,</span>
           <span class="s1">&#39;midi_to_hz&#39;</span><span class="p">,</span> <span class="s1">&#39;midi_to_note&#39;</span><span class="p">,</span>
           <span class="s1">&#39;hz_to_note&#39;</span><span class="p">,</span> <span class="s1">&#39;hz_to_midi&#39;</span><span class="p">,</span>
           <span class="s1">&#39;hz_to_mel&#39;</span><span class="p">,</span> <span class="s1">&#39;hz_to_octs&#39;</span><span class="p">,</span>
           <span class="s1">&#39;mel_to_hz&#39;</span><span class="p">,</span>
           <span class="s1">&#39;octs_to_hz&#39;</span><span class="p">,</span>
           <span class="s1">&#39;fft_frequencies&#39;</span><span class="p">,</span>
           <span class="s1">&#39;cqt_frequencies&#39;</span><span class="p">,</span>
           <span class="s1">&#39;mel_frequencies&#39;</span><span class="p">,</span>
           <span class="s1">&#39;tempo_frequencies&#39;</span><span class="p">,</span>
           <span class="s1">&#39;A_weighting&#39;</span><span class="p">,</span>
           <span class="s1">&#39;samples_like&#39;</span><span class="p">,</span>
           <span class="s1">&#39;times_like&#39;</span><span class="p">]</span>


<div class="viewcode-block" id="frames_to_samples"><a class="viewcode-back" href="../../../generated/librosa.core.frames_to_samples.html#librosa.core.frames_to_samples">[docs]</a><span class="k">def</span> <span class="nf">frames_to_samples</span><span class="p">(</span><span class="n">frames</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">,</span> <span class="n">n_fft</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts frame indices to audio sample indices.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    frames     : number or np.ndarray [shape=(n,)]</span>
<span class="sd">        frame index or vector of frame indices</span>

<span class="sd">    hop_length : int &gt; 0 [scalar]</span>
<span class="sd">        number of samples between successive frames</span>

<span class="sd">    n_fft : None or int &gt; 0 [scalar]</span>
<span class="sd">        Optional: length of the FFT window.</span>
<span class="sd">        If given, time conversion will include an offset of `n_fft / 2`</span>
<span class="sd">        to counteract windowing effects when using a non-centered STFT.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    times : number or np.ndarray</span>
<span class="sd">        time (in samples) of each given frame number:</span>
<span class="sd">        `times[i] = frames[i] * hop_length`</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    frames_to_time : convert frame indices to time values</span>
<span class="sd">    samples_to_frames : convert sample indices to frame indices</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; y, sr = librosa.load(librosa.util.example_audio_file())</span>
<span class="sd">    &gt;&gt;&gt; tempo, beats = librosa.beat.beat_track(y, sr=sr)</span>
<span class="sd">    &gt;&gt;&gt; beat_samples = librosa.frames_to_samples(beats)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">n_fft</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">n_fft</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asanyarray</span><span class="p">(</span><span class="n">frames</span><span class="p">)</span> <span class="o">*</span> <span class="n">hop_length</span> <span class="o">+</span> <span class="n">offset</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span></div>


<div class="viewcode-block" id="samples_to_frames"><a class="viewcode-back" href="../../../generated/librosa.core.samples_to_frames.html#librosa.core.samples_to_frames">[docs]</a><span class="k">def</span> <span class="nf">samples_to_frames</span><span class="p">(</span><span class="n">samples</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">,</span> <span class="n">n_fft</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts sample indices into STFT frames.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; # Get the frame numbers for every 256 samples</span>
<span class="sd">    &gt;&gt;&gt; librosa.samples_to_frames(np.arange(0, 22050, 256))</span>
<span class="sd">    array([ 0,  0,  1,  1,  2,  2,  3,  3,  4,  4,  5,  5,  6,  6,</span>
<span class="sd">            7,  7,  8,  8,  9,  9, 10, 10, 11, 11, 12, 12, 13, 13,</span>
<span class="sd">           14, 14, 15, 15, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20,</span>
<span class="sd">           21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27,</span>
<span class="sd">           28, 28, 29, 29, 30, 30, 31, 31, 32, 32, 33, 33, 34, 34,</span>
<span class="sd">           35, 35, 36, 36, 37, 37, 38, 38, 39, 39, 40, 40, 41, 41,</span>
<span class="sd">           42, 42, 43])</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    samples : int or np.ndarray [shape=(n,)]</span>
<span class="sd">        sample index or vector of sample indices</span>

<span class="sd">    hop_length : int &gt; 0 [scalar]</span>
<span class="sd">        number of samples between successive frames</span>

<span class="sd">    n_fft : None or int &gt; 0 [scalar]</span>
<span class="sd">        Optional: length of the FFT window.</span>
<span class="sd">        If given, time conversion will include an offset of `- n_fft / 2`</span>
<span class="sd">        to counteract windowing effects in STFT.</span>

<span class="sd">        .. note:: This may result in negative frame indices.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    frames : int or np.ndarray [shape=(n,), dtype=int]</span>
<span class="sd">        Frame numbers corresponding to the given times:</span>
<span class="sd">        `frames[i] = floor( samples[i] / hop_length )`</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    samples_to_time : convert sample indices to time values</span>
<span class="sd">    frames_to_samples : convert frame indices to sample indices</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">n_fft</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">n_fft</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)</span>

    <span class="n">samples</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asanyarray</span><span class="p">(</span><span class="n">samples</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">((</span><span class="n">samples</span> <span class="o">-</span> <span class="n">offset</span><span class="p">)</span> <span class="o">//</span> <span class="n">hop_length</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span></div>


<div class="viewcode-block" id="frames_to_time"><a class="viewcode-back" href="../../../generated/librosa.core.frames_to_time.html#librosa.core.frames_to_time">[docs]</a><span class="k">def</span> <span class="nf">frames_to_time</span><span class="p">(</span><span class="n">frames</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="mi">22050</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">,</span> <span class="n">n_fft</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts frame counts to time (seconds).</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    frames     : np.ndarray [shape=(n,)]</span>
<span class="sd">        frame index or vector of frame indices</span>

<span class="sd">    sr         : number &gt; 0 [scalar]</span>
<span class="sd">        audio sampling rate</span>

<span class="sd">    hop_length : int &gt; 0 [scalar]</span>
<span class="sd">        number of samples between successive frames</span>

<span class="sd">    n_fft : None or int &gt; 0 [scalar]</span>
<span class="sd">        Optional: length of the FFT window.</span>
<span class="sd">        If given, time conversion will include an offset of `n_fft / 2`</span>
<span class="sd">        to counteract windowing effects when using a non-centered STFT.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    times : np.ndarray [shape=(n,)]</span>
<span class="sd">        time (in seconds) of each given frame number:</span>
<span class="sd">        `times[i] = frames[i] * hop_length / sr`</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    time_to_frames : convert time values to frame indices</span>
<span class="sd">    frames_to_samples : convert frame indices to sample indices</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; y, sr = librosa.load(librosa.util.example_audio_file())</span>
<span class="sd">    &gt;&gt;&gt; tempo, beats = librosa.beat.beat_track(y, sr=sr)</span>
<span class="sd">    &gt;&gt;&gt; beat_times = librosa.frames_to_time(beats, sr=sr)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">samples</span> <span class="o">=</span> <span class="n">frames_to_samples</span><span class="p">(</span><span class="n">frames</span><span class="p">,</span>
                                <span class="n">hop_length</span><span class="o">=</span><span class="n">hop_length</span><span class="p">,</span>
                                <span class="n">n_fft</span><span class="o">=</span><span class="n">n_fft</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">samples_to_time</span><span class="p">(</span><span class="n">samples</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span></div>


<div class="viewcode-block" id="time_to_frames"><a class="viewcode-back" href="../../../generated/librosa.core.time_to_frames.html#librosa.core.time_to_frames">[docs]</a><span class="k">def</span> <span class="nf">time_to_frames</span><span class="p">(</span><span class="n">times</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="mi">22050</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">,</span> <span class="n">n_fft</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Converts time stamps into STFT frames.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    times : np.ndarray [shape=(n,)]</span>
<span class="sd">        time (in seconds) or vector of time values</span>

<span class="sd">    sr : number &gt; 0 [scalar]</span>
<span class="sd">        audio sampling rate</span>

<span class="sd">    hop_length : int &gt; 0 [scalar]</span>
<span class="sd">        number of samples between successive frames</span>

<span class="sd">    n_fft : None or int &gt; 0 [scalar]</span>
<span class="sd">        Optional: length of the FFT window.</span>
<span class="sd">        If given, time conversion will include an offset of `- n_fft / 2`</span>
<span class="sd">        to counteract windowing effects in STFT.</span>

<span class="sd">        .. note:: This may result in negative frame indices.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    frames : np.ndarray [shape=(n,), dtype=int]</span>
<span class="sd">        Frame numbers corresponding to the given times:</span>
<span class="sd">        `frames[i] = floor( times[i] * sr / hop_length )`</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    frames_to_time : convert frame indices to time values</span>
<span class="sd">    time_to_samples : convert time values to sample indices</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    Get the frame numbers for every 100ms</span>

<span class="sd">    &gt;&gt;&gt; librosa.time_to_frames(np.arange(0, 1, 0.1),</span>
<span class="sd">    ...                         sr=22050, hop_length=512)</span>
<span class="sd">    array([ 0,  4,  8, 12, 17, 21, 25, 30, 34, 38])</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">samples</span> <span class="o">=</span> <span class="n">time_to_samples</span><span class="p">(</span><span class="n">times</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">samples_to_frames</span><span class="p">(</span><span class="n">samples</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="n">hop_length</span><span class="p">,</span> <span class="n">n_fft</span><span class="o">=</span><span class="n">n_fft</span><span class="p">)</span></div>


<div class="viewcode-block" id="time_to_samples"><a class="viewcode-back" href="../../../generated/librosa.core.time_to_samples.html#librosa.core.time_to_samples">[docs]</a><span class="k">def</span> <span class="nf">time_to_samples</span><span class="p">(</span><span class="n">times</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="mi">22050</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Convert timestamps (in seconds) to sample indices.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    times : number or np.ndarray</span>
<span class="sd">        Time value or array of time values (in seconds)</span>

<span class="sd">    sr : number &gt; 0</span>
<span class="sd">        Sampling rate</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    samples : int or np.ndarray [shape=times.shape, dtype=int]</span>
<span class="sd">        Sample indices corresponding to values in `times`</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    time_to_frames : convert time values to frame indices</span>
<span class="sd">    samples_to_time : convert sample indices to time values</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; librosa.time_to_samples(np.arange(0, 1, 0.1), sr=22050)</span>
<span class="sd">    array([    0,  2205,  4410,  6615,  8820, 11025, 13230, 15435,</span>
<span class="sd">           17640, 19845])</span>

<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asanyarray</span><span class="p">(</span><span class="n">times</span><span class="p">)</span> <span class="o">*</span> <span class="n">sr</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span></div>


<div class="viewcode-block" id="samples_to_time"><a class="viewcode-back" href="../../../generated/librosa.core.samples_to_time.html#librosa.core.samples_to_time">[docs]</a><span class="k">def</span> <span class="nf">samples_to_time</span><span class="p">(</span><span class="n">samples</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="mi">22050</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Convert sample indices to time (in seconds).</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    samples : np.ndarray</span>
<span class="sd">        Sample index or array of sample indices</span>

<span class="sd">    sr : number &gt; 0</span>
<span class="sd">        Sampling rate</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    times : np.ndarray [shape=samples.shape, dtype=int]</span>
<span class="sd">        Time values corresponding to `samples` (in seconds)</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    samples_to_frames : convert sample indices to frame indices</span>
<span class="sd">    time_to_samples : convert time values to sample indices</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    Get timestamps corresponding to every 512 samples</span>

<span class="sd">    &gt;&gt;&gt; librosa.samples_to_time(np.arange(0, 22050, 512))</span>
<span class="sd">    array([ 0.   ,  0.023,  0.046,  0.07 ,  0.093,  0.116,  0.139,</span>
<span class="sd">            0.163,  0.186,  0.209,  0.232,  0.255,  0.279,  0.302,</span>
<span class="sd">            0.325,  0.348,  0.372,  0.395,  0.418,  0.441,  0.464,</span>
<span class="sd">            0.488,  0.511,  0.534,  0.557,  0.58 ,  0.604,  0.627,</span>
<span class="sd">            0.65 ,  0.673,  0.697,  0.72 ,  0.743,  0.766,  0.789,</span>
<span class="sd">            0.813,  0.836,  0.859,  0.882,  0.906,  0.929,  0.952,</span>
<span class="sd">            0.975,  0.998])</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">asanyarray</span><span class="p">(</span><span class="n">samples</span><span class="p">)</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">sr</span><span class="p">)</span></div>


<div class="viewcode-block" id="note_to_hz"><a class="viewcode-back" href="../../../generated/librosa.core.note_to_hz.html#librosa.core.note_to_hz">[docs]</a><span class="k">def</span> <span class="nf">note_to_hz</span><span class="p">(</span><span class="n">note</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Convert one or more note names to frequency (Hz)</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; # Get the frequency of a note</span>
<span class="sd">    &gt;&gt;&gt; librosa.note_to_hz(&#39;C&#39;)</span>
<span class="sd">    array([ 16.352])</span>
<span class="sd">    &gt;&gt;&gt; # Or multiple notes</span>
<span class="sd">    &gt;&gt;&gt; librosa.note_to_hz([&#39;A3&#39;, &#39;A4&#39;, &#39;A5&#39;])</span>
<span class="sd">    array([ 220.,  440.,  880.])</span>
<span class="sd">    &gt;&gt;&gt; # Or notes with tuning deviations</span>
<span class="sd">    &gt;&gt;&gt; librosa.note_to_hz(&#39;C2-32&#39;, round_midi=False)</span>
<span class="sd">    array([ 64.209])</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    note : str or iterable of str</span>
<span class="sd">        One or more note names to convert</span>

<span class="sd">    kwargs : additional keyword arguments</span>
<span class="sd">        Additional parameters to `note_to_midi`</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    frequencies : number or np.ndarray [shape=(len(note),)]</span>
<span class="sd">        Array of frequencies (in Hz) corresponding to `note`</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    midi_to_hz</span>
<span class="sd">    note_to_midi</span>
<span class="sd">    hz_to_note</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="n">midi_to_hz</span><span class="p">(</span><span class="n">note_to_midi</span><span class="p">(</span><span class="n">note</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span></div>


<div class="viewcode-block" id="note_to_midi"><a class="viewcode-back" href="../../../generated/librosa.core.note_to_midi.html#librosa.core.note_to_midi">[docs]</a><span class="k">def</span> <span class="nf">note_to_midi</span><span class="p">(</span><span class="n">note</span><span class="p">,</span> <span class="n">round_midi</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Convert one or more spelled notes to MIDI number(s).</span>

<span class="sd">    Notes may be spelled out with optional accidentals or octave numbers.</span>

<span class="sd">    The leading note name is case-insensitive.</span>

<span class="sd">    Sharps are indicated with ``#``, flats may be indicated with ``!`` or ``b``.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    note : str or iterable of str</span>
<span class="sd">        One or more note names.</span>

<span class="sd">    round_midi : bool</span>
<span class="sd">        - If `True`, allow for fractional midi notes</span>
<span class="sd">        - Otherwise, round cent deviations to the nearest note</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    midi : float or np.array</span>
<span class="sd">        Midi note numbers corresponding to inputs.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ParameterError</span>
<span class="sd">        If the input is not in valid note format</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    midi_to_note</span>
<span class="sd">    note_to_hz</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; librosa.note_to_midi(&#39;C&#39;)</span>
<span class="sd">    12</span>
<span class="sd">    &gt;&gt;&gt; librosa.note_to_midi(&#39;C#3&#39;)</span>
<span class="sd">    49</span>
<span class="sd">    &gt;&gt;&gt; librosa.note_to_midi(&#39;f4&#39;)</span>
<span class="sd">    65</span>
<span class="sd">    &gt;&gt;&gt; librosa.note_to_midi(&#39;Bb-1&#39;)</span>
<span class="sd">    10</span>
<span class="sd">    &gt;&gt;&gt; librosa.note_to_midi(&#39;A!8&#39;)</span>
<span class="sd">    116</span>
<span class="sd">    &gt;&gt;&gt; # Lists of notes also work</span>
<span class="sd">    &gt;&gt;&gt; librosa.note_to_midi([&#39;C&#39;, &#39;E&#39;, &#39;G&#39;])</span>
<span class="sd">    array([12, 16, 19])</span>

<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">note</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">note_to_midi</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">round_midi</span><span class="o">=</span><span class="n">round_midi</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">note</span><span class="p">])</span>

    <span class="n">pitch_map</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;G&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="mi">11</span><span class="p">}</span>
    <span class="n">acc_map</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;#&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;!&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">}</span>

    <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^(?P&lt;note&gt;[A-Ga-g])&#39;</span>
                     <span class="sa">r</span><span class="s1">&#39;(?P&lt;accidental&gt;[#b!]*)&#39;</span>
                     <span class="sa">r</span><span class="s1">&#39;(?P&lt;octave&gt;[+-]?\d+)?&#39;</span>
                     <span class="sa">r</span><span class="s1">&#39;(?P&lt;cents&gt;[+-]\d+)?$&#39;</span><span class="p">,</span>
                     <span class="n">note</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ParameterError</span><span class="p">(</span><span class="s1">&#39;Improper note format: </span><span class="si">{:s}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">note</span><span class="p">))</span>

    <span class="n">pitch</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;note&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
    <span class="n">offset</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">([</span><span class="n">acc_map</span><span class="p">[</span><span class="n">o</span><span class="p">]</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;accidental&#39;</span><span class="p">)])</span>
    <span class="n">octave</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;octave&#39;</span><span class="p">)</span>
    <span class="n">cents</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;cents&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">octave</span><span class="p">:</span>
        <span class="n">octave</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">octave</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">octave</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">cents</span><span class="p">:</span>
        <span class="n">cents</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cents</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">cents</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1e-2</span>

    <span class="n">note_value</span> <span class="o">=</span> <span class="mi">12</span> <span class="o">*</span> <span class="p">(</span><span class="n">octave</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">pitch_map</span><span class="p">[</span><span class="n">pitch</span><span class="p">]</span> <span class="o">+</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">cents</span>

    <span class="k">if</span> <span class="n">round_midi</span><span class="p">:</span>
        <span class="n">note_value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">note_value</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">note_value</span></div>


<div class="viewcode-block" id="midi_to_note"><a class="viewcode-back" href="../../../generated/librosa.core.midi_to_note.html#librosa.core.midi_to_note">[docs]</a><span class="k">def</span> <span class="nf">midi_to_note</span><span class="p">(</span><span class="n">midi</span><span class="p">,</span> <span class="n">octave</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cents</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Convert one or more MIDI numbers to note strings.</span>

<span class="sd">    MIDI numbers will be rounded to the nearest integer.</span>

<span class="sd">    Notes will be of the format &#39;C0&#39;, &#39;C#0&#39;, &#39;D0&#39;, ...</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; librosa.midi_to_note(0)</span>
<span class="sd">    &#39;C-1&#39;</span>
<span class="sd">    &gt;&gt;&gt; librosa.midi_to_note(37)</span>
<span class="sd">    &#39;C#2&#39;</span>
<span class="sd">    &gt;&gt;&gt; librosa.midi_to_note(-2)</span>
<span class="sd">    &#39;A#-2&#39;</span>
<span class="sd">    &gt;&gt;&gt; librosa.midi_to_note(104.7)</span>
<span class="sd">    &#39;A7&#39;</span>
<span class="sd">    &gt;&gt;&gt; librosa.midi_to_note(104.7, cents=True)</span>
<span class="sd">    &#39;A7-30&#39;</span>
<span class="sd">    &gt;&gt;&gt; librosa.midi_to_note(list(range(12, 24)))</span>
<span class="sd">    [&#39;C0&#39;, &#39;C#0&#39;, &#39;D0&#39;, &#39;D#0&#39;, &#39;E0&#39;, &#39;F0&#39;, &#39;F#0&#39;, &#39;G0&#39;, &#39;G#0&#39;, &#39;A0&#39;, &#39;A#0&#39;, &#39;B0&#39;]</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    midi : int or iterable of int</span>
<span class="sd">        Midi numbers to convert.</span>

<span class="sd">    octave: bool</span>
<span class="sd">        If True, include the octave number</span>

<span class="sd">    cents: bool</span>
<span class="sd">        If true, cent markers will be appended for fractional notes.</span>
<span class="sd">        Eg, `midi_to_note(69.3, cents=True)` == `A4+03`</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    notes : str or iterable of str</span>
<span class="sd">        Strings describing each midi note.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ParameterError</span>
<span class="sd">        if `cents` is True and `octave` is False</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    midi_to_hz</span>
<span class="sd">    note_to_midi</span>
<span class="sd">    hz_to_note</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">if</span> <span class="n">cents</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">octave</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ParameterError</span><span class="p">(</span><span class="s1">&#39;Cannot encode cents without octave information.&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isscalar</span><span class="p">(</span><span class="n">midi</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">midi_to_note</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">octave</span><span class="o">=</span><span class="n">octave</span><span class="p">,</span> <span class="n">cents</span><span class="o">=</span><span class="n">cents</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">midi</span><span class="p">]</span>

    <span class="n">note_map</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;C#&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="s1">&#39;D#&#39;</span><span class="p">,</span>
                <span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="s1">&#39;F#&#39;</span><span class="p">,</span> <span class="s1">&#39;G&#39;</span><span class="p">,</span>
                <span class="s1">&#39;G#&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;A#&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">]</span>

    <span class="n">note_num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">midi</span><span class="p">))</span>
    <span class="n">note_cents</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">around</span><span class="p">(</span><span class="n">midi</span> <span class="o">-</span> <span class="n">note_num</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>

    <span class="n">note</span> <span class="o">=</span> <span class="n">note_map</span><span class="p">[</span><span class="n">note_num</span> <span class="o">%</span> <span class="mi">12</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">octave</span><span class="p">:</span>
        <span class="n">note</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{:s}{:0d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">note</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">note_num</span> <span class="o">/</span> <span class="mi">12</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">cents</span><span class="p">:</span>
        <span class="n">note</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{:s}{:+02d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">note</span><span class="p">,</span> <span class="n">note_cents</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">note</span></div>


<div class="viewcode-block" id="midi_to_hz"><a class="viewcode-back" href="../../../generated/librosa.core.midi_to_hz.html#librosa.core.midi_to_hz">[docs]</a><span class="k">def</span> <span class="nf">midi_to_hz</span><span class="p">(</span><span class="n">notes</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the frequency (Hz) of MIDI note(s)</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; librosa.midi_to_hz(36)</span>
<span class="sd">    65.406</span>

<span class="sd">    &gt;&gt;&gt; librosa.midi_to_hz(np.arange(36, 48))</span>
<span class="sd">    array([  65.406,   69.296,   73.416,   77.782,   82.407,</span>
<span class="sd">             87.307,   92.499,   97.999,  103.826,  110.   ,</span>
<span class="sd">            116.541,  123.471])</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    notes       : int or np.ndarray [shape=(n,), dtype=int]</span>
<span class="sd">        midi number(s) of the note(s)</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    frequency   : number or np.ndarray [shape=(n,), dtype=float]</span>
<span class="sd">        frequency (frequencies) of `notes` in Hz</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    hz_to_midi</span>
<span class="sd">    note_to_hz</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="mf">440.0</span> <span class="o">*</span> <span class="p">(</span><span class="mf">2.0</span> <span class="o">**</span> <span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">asanyarray</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span> <span class="o">-</span> <span class="mf">69.0</span><span class="p">)</span><span class="o">/</span><span class="mf">12.0</span><span class="p">))</span></div>


<div class="viewcode-block" id="hz_to_midi"><a class="viewcode-back" href="../../../generated/librosa.core.hz_to_midi.html#librosa.core.hz_to_midi">[docs]</a><span class="k">def</span> <span class="nf">hz_to_midi</span><span class="p">(</span><span class="n">frequencies</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get MIDI note number(s) for given frequencies</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; librosa.hz_to_midi(60)</span>
<span class="sd">    34.506</span>
<span class="sd">    &gt;&gt;&gt; librosa.hz_to_midi([110, 220, 440])</span>
<span class="sd">    array([ 45.,  57.,  69.])</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    frequencies   : float or np.ndarray [shape=(n,), dtype=float]</span>
<span class="sd">        frequencies to convert</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    note_nums     : number or np.ndarray [shape=(n,), dtype=float]</span>
<span class="sd">        MIDI notes to `frequencies`</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    midi_to_hz</span>
<span class="sd">    note_to_midi</span>
<span class="sd">    hz_to_note</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="mi">12</span> <span class="o">*</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asanyarray</span><span class="p">(</span><span class="n">frequencies</span><span class="p">))</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="mf">440.0</span><span class="p">))</span> <span class="o">+</span> <span class="mi">69</span></div>


<div class="viewcode-block" id="hz_to_note"><a class="viewcode-back" href="../../../generated/librosa.core.hz_to_note.html#librosa.core.hz_to_note">[docs]</a><span class="k">def</span> <span class="nf">hz_to_note</span><span class="p">(</span><span class="n">frequencies</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Convert one or more frequencies (in Hz) to the nearest note names.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    frequencies : float or iterable of float</span>
<span class="sd">        Input frequencies, specified in Hz</span>

<span class="sd">    kwargs : additional keyword arguments</span>
<span class="sd">        Arguments passed through to `midi_to_note`</span>


<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    notes : list of str</span>
<span class="sd">        `notes[i]` is the closest note name to `frequency[i]`</span>
<span class="sd">        (or `frequency` if the input is scalar)</span>


<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    hz_to_midi</span>
<span class="sd">    midi_to_note</span>
<span class="sd">    note_to_hz</span>


<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    Get a single note name for a frequency</span>

<span class="sd">    &gt;&gt;&gt; librosa.hz_to_note(440.0)</span>
<span class="sd">    [&#39;A5&#39;]</span>

<span class="sd">    Get multiple notes with cent deviation</span>

<span class="sd">    &gt;&gt;&gt; librosa.hz_to_note([32, 64], cents=True)</span>
<span class="sd">    [&#39;C1-38&#39;, &#39;C2-38&#39;]</span>

<span class="sd">    Get multiple notes, but suppress octave labels</span>

<span class="sd">    &gt;&gt;&gt; librosa.hz_to_note(440.0 * (2.0 ** np.linspace(0, 1, 12)),</span>
<span class="sd">    ...                    octave=False)</span>
<span class="sd">    [&#39;A&#39;, &#39;A#&#39;, &#39;B&#39;, &#39;C&#39;, &#39;C#&#39;, &#39;D&#39;, &#39;E&#39;, &#39;F&#39;, &#39;F#&#39;, &#39;G&#39;, &#39;G#&#39;, &#39;A&#39;]</span>

<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="n">midi_to_note</span><span class="p">(</span><span class="n">hz_to_midi</span><span class="p">(</span><span class="n">frequencies</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="hz_to_mel"><a class="viewcode-back" href="../../../generated/librosa.core.hz_to_mel.html#librosa.core.hz_to_mel">[docs]</a><span class="k">def</span> <span class="nf">hz_to_mel</span><span class="p">(</span><span class="n">frequencies</span><span class="p">,</span> <span class="n">htk</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convert Hz to Mels</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; librosa.hz_to_mel(60)</span>
<span class="sd">    0.9</span>
<span class="sd">    &gt;&gt;&gt; librosa.hz_to_mel([110, 220, 440])</span>
<span class="sd">    array([ 1.65,  3.3 ,  6.6 ])</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    frequencies   : number or np.ndarray [shape=(n,)] , float</span>
<span class="sd">        scalar or array of frequencies</span>
<span class="sd">    htk           : bool</span>
<span class="sd">        use HTK formula instead of Slaney</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    mels        : number or np.ndarray [shape=(n,)]</span>
<span class="sd">        input frequencies in Mels</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    mel_to_hz</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">frequencies</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asanyarray</span><span class="p">(</span><span class="n">frequencies</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">htk</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">2595.0</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">+</span> <span class="n">frequencies</span> <span class="o">/</span> <span class="mf">700.0</span><span class="p">)</span>

    <span class="c1"># Fill in the linear part</span>
    <span class="n">f_min</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">f_sp</span> <span class="o">=</span> <span class="mf">200.0</span> <span class="o">/</span> <span class="mi">3</span>

    <span class="n">mels</span> <span class="o">=</span> <span class="p">(</span><span class="n">frequencies</span> <span class="o">-</span> <span class="n">f_min</span><span class="p">)</span> <span class="o">/</span> <span class="n">f_sp</span>

    <span class="c1"># Fill in the log-scale part</span>

    <span class="n">min_log_hz</span> <span class="o">=</span> <span class="mf">1000.0</span>                         <span class="c1"># beginning of log region (Hz)</span>
    <span class="n">min_log_mel</span> <span class="o">=</span> <span class="p">(</span><span class="n">min_log_hz</span> <span class="o">-</span> <span class="n">f_min</span><span class="p">)</span> <span class="o">/</span> <span class="n">f_sp</span>   <span class="c1"># same (Mels)</span>
    <span class="n">logstep</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mf">6.4</span><span class="p">)</span> <span class="o">/</span> <span class="mf">27.0</span>                <span class="c1"># step size for log region</span>

    <span class="k">if</span> <span class="n">frequencies</span><span class="o">.</span><span class="n">ndim</span><span class="p">:</span>
        <span class="c1"># If we have array data, vectorize</span>
        <span class="n">log_t</span> <span class="o">=</span> <span class="p">(</span><span class="n">frequencies</span> <span class="o">&gt;=</span> <span class="n">min_log_hz</span><span class="p">)</span>
        <span class="n">mels</span><span class="p">[</span><span class="n">log_t</span><span class="p">]</span> <span class="o">=</span> <span class="n">min_log_mel</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">frequencies</span><span class="p">[</span><span class="n">log_t</span><span class="p">]</span><span class="o">/</span><span class="n">min_log_hz</span><span class="p">)</span> <span class="o">/</span> <span class="n">logstep</span>
    <span class="k">elif</span> <span class="n">frequencies</span> <span class="o">&gt;=</span> <span class="n">min_log_hz</span><span class="p">:</span>
        <span class="c1"># If we have scalar data, heck directly</span>
        <span class="n">mels</span> <span class="o">=</span> <span class="n">min_log_mel</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">frequencies</span> <span class="o">/</span> <span class="n">min_log_hz</span><span class="p">)</span> <span class="o">/</span> <span class="n">logstep</span>

    <span class="k">return</span> <span class="n">mels</span></div>


<div class="viewcode-block" id="mel_to_hz"><a class="viewcode-back" href="../../../generated/librosa.core.mel_to_hz.html#librosa.core.mel_to_hz">[docs]</a><span class="k">def</span> <span class="nf">mel_to_hz</span><span class="p">(</span><span class="n">mels</span><span class="p">,</span> <span class="n">htk</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convert mel bin numbers to frequencies</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; librosa.mel_to_hz(3)</span>
<span class="sd">    200.</span>

<span class="sd">    &gt;&gt;&gt; librosa.mel_to_hz([1,2,3,4,5])</span>
<span class="sd">    array([  66.667,  133.333,  200.   ,  266.667,  333.333])</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    mels          : np.ndarray [shape=(n,)], float</span>
<span class="sd">        mel bins to convert</span>
<span class="sd">    htk           : bool</span>
<span class="sd">        use HTK formula instead of Slaney</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    frequencies   : np.ndarray [shape=(n,)]</span>
<span class="sd">        input mels in Hz</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    hz_to_mel</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">mels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asanyarray</span><span class="p">(</span><span class="n">mels</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">htk</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">700.0</span> <span class="o">*</span> <span class="p">(</span><span class="mf">10.0</span><span class="o">**</span><span class="p">(</span><span class="n">mels</span> <span class="o">/</span> <span class="mf">2595.0</span><span class="p">)</span> <span class="o">-</span> <span class="mf">1.0</span><span class="p">)</span>

    <span class="c1"># Fill in the linear scale</span>
    <span class="n">f_min</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">f_sp</span> <span class="o">=</span> <span class="mf">200.0</span> <span class="o">/</span> <span class="mi">3</span>
    <span class="n">freqs</span> <span class="o">=</span> <span class="n">f_min</span> <span class="o">+</span> <span class="n">f_sp</span> <span class="o">*</span> <span class="n">mels</span>

    <span class="c1"># And now the nonlinear scale</span>
    <span class="n">min_log_hz</span> <span class="o">=</span> <span class="mf">1000.0</span>                         <span class="c1"># beginning of log region (Hz)</span>
    <span class="n">min_log_mel</span> <span class="o">=</span> <span class="p">(</span><span class="n">min_log_hz</span> <span class="o">-</span> <span class="n">f_min</span><span class="p">)</span> <span class="o">/</span> <span class="n">f_sp</span>   <span class="c1"># same (Mels)</span>
    <span class="n">logstep</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mf">6.4</span><span class="p">)</span> <span class="o">/</span> <span class="mf">27.0</span>                <span class="c1"># step size for log region</span>

    <span class="k">if</span> <span class="n">mels</span><span class="o">.</span><span class="n">ndim</span><span class="p">:</span>
        <span class="c1"># If we have vector data, vectorize</span>
        <span class="n">log_t</span> <span class="o">=</span> <span class="p">(</span><span class="n">mels</span> <span class="o">&gt;=</span> <span class="n">min_log_mel</span><span class="p">)</span>
        <span class="n">freqs</span><span class="p">[</span><span class="n">log_t</span><span class="p">]</span> <span class="o">=</span> <span class="n">min_log_hz</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">logstep</span> <span class="o">*</span> <span class="p">(</span><span class="n">mels</span><span class="p">[</span><span class="n">log_t</span><span class="p">]</span> <span class="o">-</span> <span class="n">min_log_mel</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">mels</span> <span class="o">&gt;=</span> <span class="n">min_log_mel</span><span class="p">:</span>
        <span class="c1"># If we have scalar data, check directly</span>
        <span class="n">freqs</span> <span class="o">=</span> <span class="n">min_log_hz</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">logstep</span> <span class="o">*</span> <span class="p">(</span><span class="n">mels</span> <span class="o">-</span> <span class="n">min_log_mel</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">freqs</span></div>


<div class="viewcode-block" id="hz_to_octs"><a class="viewcode-back" href="../../../generated/librosa.core.hz_to_octs.html#librosa.core.hz_to_octs">[docs]</a><span class="k">def</span> <span class="nf">hz_to_octs</span><span class="p">(</span><span class="n">frequencies</span><span class="p">,</span> <span class="n">A440</span><span class="o">=</span><span class="mf">440.0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convert frequencies (Hz) to (fractional) octave numbers.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; librosa.hz_to_octs(440.0)</span>
<span class="sd">    4.</span>
<span class="sd">    &gt;&gt;&gt; librosa.hz_to_octs([32, 64, 128, 256])</span>
<span class="sd">    array([ 0.219,  1.219,  2.219,  3.219])</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    frequencies   : number &gt;0 or np.ndarray [shape=(n,)] or float</span>
<span class="sd">        scalar or vector of frequencies</span>
<span class="sd">    A440          : float</span>
<span class="sd">        frequency of A440 (in Hz)</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    octaves       : number or np.ndarray [shape=(n,)]</span>
<span class="sd">        octave number for each frequency</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    octs_to_hz</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asanyarray</span><span class="p">(</span><span class="n">frequencies</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">A440</span><span class="p">)</span> <span class="o">/</span> <span class="mi">16</span><span class="p">))</span></div>


<div class="viewcode-block" id="octs_to_hz"><a class="viewcode-back" href="../../../generated/librosa.core.octs_to_hz.html#librosa.core.octs_to_hz">[docs]</a><span class="k">def</span> <span class="nf">octs_to_hz</span><span class="p">(</span><span class="n">octs</span><span class="p">,</span> <span class="n">A440</span><span class="o">=</span><span class="mf">440.0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convert octaves numbers to frequencies.</span>

<span class="sd">    Octaves are counted relative to A.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; librosa.octs_to_hz(1)</span>
<span class="sd">    55.</span>
<span class="sd">    &gt;&gt;&gt; librosa.octs_to_hz([-2, -1, 0, 1, 2])</span>
<span class="sd">    array([   6.875,   13.75 ,   27.5  ,   55.   ,  110.   ])</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    octaves       : np.ndarray [shape=(n,)] or float</span>
<span class="sd">        octave number for each frequency</span>
<span class="sd">    A440          : float</span>
<span class="sd">        frequency of A440</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    frequencies   : number or np.ndarray [shape=(n,)]</span>
<span class="sd">        scalar or vector of frequencies</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    hz_to_octs</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">A440</span><span class="p">)</span> <span class="o">/</span> <span class="mi">16</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mf">2.0</span><span class="o">**</span><span class="n">np</span><span class="o">.</span><span class="n">asanyarray</span><span class="p">(</span><span class="n">octs</span><span class="p">))</span></div>


<div class="viewcode-block" id="fft_frequencies"><a class="viewcode-back" href="../../../generated/librosa.core.fft_frequencies.html#librosa.core.fft_frequencies">[docs]</a><span class="k">def</span> <span class="nf">fft_frequencies</span><span class="p">(</span><span class="n">sr</span><span class="o">=</span><span class="mi">22050</span><span class="p">,</span> <span class="n">n_fft</span><span class="o">=</span><span class="mi">2048</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Alternative implementation of `np.fft.fftfreq`</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    sr : number &gt; 0 [scalar]</span>
<span class="sd">        Audio sampling rate</span>

<span class="sd">    n_fft : int &gt; 0 [scalar]</span>
<span class="sd">        FFT window size</span>


<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    freqs : np.ndarray [shape=(1 + n_fft/2,)]</span>
<span class="sd">        Frequencies `(0, sr/n_fft, 2*sr/n_fft, ..., sr/2)`</span>


<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; librosa.fft_frequencies(sr=22050, n_fft=16)</span>
<span class="sd">    array([     0.   ,   1378.125,   2756.25 ,   4134.375,</span>
<span class="sd">             5512.5  ,   6890.625,   8268.75 ,   9646.875,  11025.   ])</span>

<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span>
                       <span class="nb">float</span><span class="p">(</span><span class="n">sr</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
                       <span class="nb">int</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">n_fft</span><span class="o">//</span><span class="mi">2</span><span class="p">),</span>
                       <span class="n">endpoint</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="cqt_frequencies"><a class="viewcode-back" href="../../../generated/librosa.core.cqt_frequencies.html#librosa.core.cqt_frequencies">[docs]</a><span class="k">def</span> <span class="nf">cqt_frequencies</span><span class="p">(</span><span class="n">n_bins</span><span class="p">,</span> <span class="n">fmin</span><span class="p">,</span> <span class="n">bins_per_octave</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">tuning</span><span class="o">=</span><span class="mf">0.0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Compute the center frequencies of Constant-Q bins.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; # Get the CQT frequencies for 24 notes, starting at C2</span>
<span class="sd">    &gt;&gt;&gt; librosa.cqt_frequencies(24, fmin=librosa.note_to_hz(&#39;C2&#39;))</span>
<span class="sd">    array([  65.406,   69.296,   73.416,   77.782,   82.407,   87.307,</span>
<span class="sd">             92.499,   97.999,  103.826,  110.   ,  116.541,  123.471,</span>
<span class="sd">            130.813,  138.591,  146.832,  155.563,  164.814,  174.614,</span>
<span class="sd">            184.997,  195.998,  207.652,  220.   ,  233.082,  246.942])</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    n_bins  : int &gt; 0 [scalar]</span>
<span class="sd">        Number of constant-Q bins</span>

<span class="sd">    fmin    : float &gt; 0 [scalar]</span>
<span class="sd">        Minimum frequency</span>

<span class="sd">    bins_per_octave : int &gt; 0 [scalar]</span>
<span class="sd">        Number of bins per octave</span>

<span class="sd">    tuning : float in `[-0.5, +0.5)`</span>
<span class="sd">        Deviation from A440 tuning in fractional bins (cents)</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    frequencies : np.ndarray [shape=(n_bins,)]</span>
<span class="sd">        Center frequency for each CQT bin</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">correction</span> <span class="o">=</span> <span class="mf">2.0</span><span class="o">**</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">tuning</span><span class="p">)</span> <span class="o">/</span> <span class="n">bins_per_octave</span><span class="p">)</span>
    <span class="n">frequencies</span> <span class="o">=</span> <span class="mf">2.0</span><span class="o">**</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">n_bins</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span> <span class="o">/</span> <span class="n">bins_per_octave</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">correction</span> <span class="o">*</span> <span class="n">fmin</span> <span class="o">*</span> <span class="n">frequencies</span></div>


<div class="viewcode-block" id="mel_frequencies"><a class="viewcode-back" href="../../../generated/librosa.core.mel_frequencies.html#librosa.core.mel_frequencies">[docs]</a><span class="k">def</span> <span class="nf">mel_frequencies</span><span class="p">(</span><span class="n">n_mels</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span> <span class="n">fmin</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">fmax</span><span class="o">=</span><span class="mf">11025.0</span><span class="p">,</span> <span class="n">htk</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Compute an array of acoustic frequencies tuned to the mel scale.</span>

<span class="sd">    The mel scale is a quasi-logarithmic function of acoustic frequency</span>
<span class="sd">    designed such that perceptually similar pitch intervals (e.g. octaves)</span>
<span class="sd">    appear equal in width over the full hearing range.</span>

<span class="sd">    Because the definition of the mel scale is conditioned by a finite number</span>
<span class="sd">    of subjective psychoaoustical experiments, several implementations coexist</span>
<span class="sd">    in the audio signal processing literature [1]_. By default, librosa replicates</span>
<span class="sd">    the behavior of the well-established MATLAB Auditory Toolbox of Slaney [2]_.</span>
<span class="sd">    According to this default implementation,  the conversion from Hertz to mel is</span>
<span class="sd">    linear below 1 kHz and logarithmic above 1 kHz. Another available implementation</span>
<span class="sd">    replicates the Hidden Markov Toolkit [3]_ (HTK) according to the following formula:</span>

<span class="sd">    `mel = 2595.0 * np.log10(1.0 + f / 700.0).`</span>

<span class="sd">    The choice of implementation is determined by the `htk` keyword argument: setting</span>
<span class="sd">    `htk=False` leads to the Auditory toolbox implementation, whereas setting it `htk=True`</span>
<span class="sd">    leads to the HTK implementation.</span>

<span class="sd">    .. [1] Umesh, S., Cohen, L., &amp; Nelson, D. Fitting the mel scale.</span>
<span class="sd">        In Proc. International Conference on Acoustics, Speech, and Signal Processing</span>
<span class="sd">        (ICASSP), vol. 1, pp. 217-220, 1998.</span>

<span class="sd">    .. [2] Slaney, M. Auditory Toolbox: A MATLAB Toolbox for Auditory</span>
<span class="sd">        Modeling Work. Technical Report, version 2, Interval Research Corporation, 1998.</span>

<span class="sd">    .. [3] Young, S., Evermann, G., Gales, M., Hain, T., Kershaw, D., Liu, X.,</span>
<span class="sd">        Moore, G., Odell, J., Ollason, D., Povey, D., Valtchev, V., &amp; Woodland, P.</span>
<span class="sd">        The HTK book, version 3.4. Cambridge University, March 2009.</span>


<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    hz_to_mel</span>
<span class="sd">    mel_to_hz</span>
<span class="sd">    librosa.feature.melspectrogram</span>
<span class="sd">    librosa.feature.mfcc</span>


<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    n_mels    : int &gt; 0 [scalar]</span>
<span class="sd">        Number of mel bins.</span>

<span class="sd">    fmin      : float &gt;= 0 [scalar]</span>
<span class="sd">        Minimum frequency (Hz).</span>

<span class="sd">    fmax      : float &gt;= 0 [scalar]</span>
<span class="sd">        Maximum frequency (Hz).</span>

<span class="sd">    htk       : bool</span>
<span class="sd">        If True, use HTK formula to convert Hz to mel.</span>
<span class="sd">        Otherwise (False), use Slaney&#39;s Auditory Toolbox.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    bin_frequencies : ndarray [shape=(n_mels,)]</span>
<span class="sd">        Vector of n_mels frequencies in Hz which are uniformly spaced on the Mel</span>
<span class="sd">        axis.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; librosa.mel_frequencies(n_mels=40)</span>
<span class="sd">    array([     0.   ,     85.317,    170.635,    255.952,</span>
<span class="sd">              341.269,    426.586,    511.904,    597.221,</span>
<span class="sd">              682.538,    767.855,    853.173,    938.49 ,</span>
<span class="sd">             1024.856,   1119.114,   1222.042,   1334.436,</span>
<span class="sd">             1457.167,   1591.187,   1737.532,   1897.337,</span>
<span class="sd">             2071.84 ,   2262.393,   2470.47 ,   2697.686,</span>
<span class="sd">             2945.799,   3216.731,   3512.582,   3835.643,</span>
<span class="sd">             4188.417,   4573.636,   4994.285,   5453.621,</span>
<span class="sd">             5955.205,   6502.92 ,   7101.009,   7754.107,</span>
<span class="sd">             8467.272,   9246.028,  10096.408,  11025.   ])</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># &#39;Center freqs&#39; of mel bands - uniformly spaced between limits</span>
    <span class="n">min_mel</span> <span class="o">=</span> <span class="n">hz_to_mel</span><span class="p">(</span><span class="n">fmin</span><span class="p">,</span> <span class="n">htk</span><span class="o">=</span><span class="n">htk</span><span class="p">)</span>
    <span class="n">max_mel</span> <span class="o">=</span> <span class="n">hz_to_mel</span><span class="p">(</span><span class="n">fmax</span><span class="p">,</span> <span class="n">htk</span><span class="o">=</span><span class="n">htk</span><span class="p">)</span>

    <span class="n">mels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">min_mel</span><span class="p">,</span> <span class="n">max_mel</span><span class="p">,</span> <span class="n">n_mels</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">mel_to_hz</span><span class="p">(</span><span class="n">mels</span><span class="p">,</span> <span class="n">htk</span><span class="o">=</span><span class="n">htk</span><span class="p">)</span></div>


<div class="viewcode-block" id="tempo_frequencies"><a class="viewcode-back" href="../../../generated/librosa.core.tempo_frequencies.html#librosa.core.tempo_frequencies">[docs]</a><span class="k">def</span> <span class="nf">tempo_frequencies</span><span class="p">(</span><span class="n">n_bins</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="mi">22050</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Compute the frequencies (in beats-per-minute) corresponding</span>
<span class="sd">    to an onset auto-correlation or tempogram matrix.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    n_bins : int &gt; 0</span>
<span class="sd">        The number of lag bins</span>

<span class="sd">    hop_length : int &gt; 0</span>
<span class="sd">        The number of samples between each bin</span>

<span class="sd">    sr : number &gt; 0</span>
<span class="sd">        The audio sampling rate</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    bin_frequencies : ndarray [shape=(n_bins,)]</span>
<span class="sd">        vector of bin frequencies measured in BPM.</span>

<span class="sd">        .. note:: `bin_frequencies[0] = +np.inf` corresponds to 0-lag</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    Get the tempo frequencies corresponding to a 384-bin (8-second) tempogram</span>

<span class="sd">    &gt;&gt;&gt; librosa.tempo_frequencies(384)</span>
<span class="sd">    array([      inf,  2583.984,  1291.992, ...,     6.782,</span>
<span class="sd">               6.764,     6.747])</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">bin_frequencies</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">n_bins</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>

    <span class="n">bin_frequencies</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span>
    <span class="n">bin_frequencies</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">=</span> <span class="mf">60.0</span> <span class="o">*</span> <span class="n">sr</span> <span class="o">/</span> <span class="p">(</span><span class="n">hop_length</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">n_bins</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">bin_frequencies</span></div>


<span class="c1"># A-weighting should be capitalized: suppress the naming warning</span>
<div class="viewcode-block" id="A_weighting"><a class="viewcode-back" href="../../../generated/librosa.core.A_weighting.html#librosa.core.A_weighting">[docs]</a><span class="k">def</span> <span class="nf">A_weighting</span><span class="p">(</span><span class="n">frequencies</span><span class="p">,</span> <span class="n">min_db</span><span class="o">=-</span><span class="mf">80.0</span><span class="p">):</span>     <span class="c1"># pylint: disable=invalid-name</span>
    <span class="sd">&#39;&#39;&#39;Compute the A-weighting of a set of frequencies.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    frequencies : scalar or np.ndarray [shape=(n,)]</span>
<span class="sd">        One or more frequencies (in Hz)</span>

<span class="sd">    min_db : float [scalar] or None</span>
<span class="sd">        Clip weights below this threshold.</span>
<span class="sd">        If `None`, no clipping is performed.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    A_weighting : scalar or np.ndarray [shape=(n,)]</span>
<span class="sd">        `A_weighting[i]` is the A-weighting of `frequencies[i]`</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    perceptual_weighting</span>


<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    Get the A-weighting for CQT frequencies</span>

<span class="sd">    &gt;&gt;&gt; import matplotlib.pyplot as plt</span>
<span class="sd">    &gt;&gt;&gt; freqs = librosa.cqt_frequencies(108, librosa.note_to_hz(&#39;C1&#39;))</span>
<span class="sd">    &gt;&gt;&gt; aw = librosa.A_weighting(freqs)</span>
<span class="sd">    &gt;&gt;&gt; plt.plot(freqs, aw)</span>
<span class="sd">    &gt;&gt;&gt; plt.xlabel(&#39;Frequency (Hz)&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.ylabel(&#39;Weighting (log10)&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.title(&#39;A-Weighting of CQT frequencies&#39;)</span>

<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c1"># Vectorize to make our lives easier</span>
    <span class="n">frequencies</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asanyarray</span><span class="p">(</span><span class="n">frequencies</span><span class="p">)</span>

    <span class="c1"># Pre-compute squared frequency</span>
    <span class="n">f_sq</span> <span class="o">=</span> <span class="n">frequencies</span><span class="o">**</span><span class="mf">2.0</span>

    <span class="n">const</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">12200</span><span class="p">,</span> <span class="mf">20.6</span><span class="p">,</span> <span class="mf">107.7</span><span class="p">,</span> <span class="mf">737.9</span><span class="p">])</span><span class="o">**</span><span class="mf">2.0</span>

    <span class="n">weights</span> <span class="o">=</span> <span class="mf">2.0</span> <span class="o">+</span> <span class="mf">20.0</span> <span class="o">*</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">const</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">frequencies</span><span class="p">)</span>
                            <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">f_sq</span> <span class="o">+</span> <span class="n">const</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                            <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">f_sq</span> <span class="o">+</span> <span class="n">const</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                            <span class="o">-</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">f_sq</span> <span class="o">+</span> <span class="n">const</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
                            <span class="o">-</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">f_sq</span> <span class="o">+</span> <span class="n">const</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span>

    <span class="k">if</span> <span class="n">min_db</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">maximum</span><span class="p">(</span><span class="n">min_db</span><span class="p">,</span> <span class="n">weights</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">weights</span></div>


<div class="viewcode-block" id="times_like"><a class="viewcode-back" href="../../../generated/librosa.core.times_like.html#librosa.core.times_like">[docs]</a><span class="k">def</span> <span class="nf">times_like</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="mi">22050</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">,</span> <span class="n">n_fft</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return an array of time values to match the time axis from a feature matrix.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    X : np.ndarray or scalar</span>
<span class="sd">        - If ndarray, X is a feature matrix, e.g. STFT, chromagram, or mel spectrogram.</span>
<span class="sd">        - If scalar, X represents the number of frames.</span>

<span class="sd">    sr : number &gt; 0 [scalar]</span>
<span class="sd">        audio sampling rate</span>

<span class="sd">    hop_length : int &gt; 0 [scalar]</span>
<span class="sd">        number of samples between successive frames</span>

<span class="sd">    n_fft : None or int &gt; 0 [scalar]</span>
<span class="sd">        Optional: length of the FFT window.</span>
<span class="sd">        If given, time conversion will include an offset of `n_fft / 2`</span>
<span class="sd">        to counteract windowing effects when using a non-centered STFT.</span>

<span class="sd">    axis : int [scalar]</span>
<span class="sd">        The axis representing the time axis of X.</span>
<span class="sd">        By default, the last axis (-1) is taken.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    times : np.ndarray [shape=(n,)]</span>
<span class="sd">        ndarray of times (in seconds) corresponding to each frame of X.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    samples_like : Return an array of sample indices to match the time axis from a feature matrix.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    Provide a feature matrix input:</span>

<span class="sd">    &gt;&gt;&gt; y, sr = librosa.load(librosa.util.example_audio_file())</span>
<span class="sd">    &gt;&gt;&gt; X = librosa.stft(y)</span>
<span class="sd">    &gt;&gt;&gt; times = librosa.times_like(X)</span>
<span class="sd">    &gt;&gt;&gt; times</span>
<span class="sd">    array([  0.00000000e+00,   2.32199546e-02,   4.64399093e-02, ...,</span>
<span class="sd">             6.13935601e+01,   6.14167800e+01,   6.14400000e+01])</span>

<span class="sd">    Provide a scalar input:</span>

<span class="sd">    &gt;&gt;&gt; n_frames = 2647</span>
<span class="sd">    &gt;&gt;&gt; times = librosa.times_like(n_frames)</span>
<span class="sd">    &gt;&gt;&gt; times</span>
<span class="sd">    array([  0.00000000e+00,   2.32199546e-02,   4.64399093e-02, ...,</span>
<span class="sd">             6.13935601e+01,   6.14167800e+01,   6.14400000e+01])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">samples</span> <span class="o">=</span> <span class="n">samples_like</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="n">hop_length</span><span class="p">,</span> <span class="n">n_fft</span><span class="o">=</span><span class="n">n_fft</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">samples_to_time</span><span class="p">(</span><span class="n">samples</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span></div>


<div class="viewcode-block" id="samples_like"><a class="viewcode-back" href="../../../generated/librosa.core.samples_like.html#librosa.core.samples_like">[docs]</a><span class="k">def</span> <span class="nf">samples_like</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">,</span> <span class="n">n_fft</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return an array of sample indices to match the time axis from a feature matrix.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    X : np.ndarray or scalar</span>
<span class="sd">        - If ndarray, X is a feature matrix, e.g. STFT, chromagram, or mel spectrogram.</span>
<span class="sd">        - If scalar, X represents the number of frames.</span>

<span class="sd">    hop_length : int &gt; 0 [scalar]</span>
<span class="sd">        number of samples between successive frames</span>

<span class="sd">    n_fft : None or int &gt; 0 [scalar]</span>
<span class="sd">        Optional: length of the FFT window.</span>
<span class="sd">        If given, time conversion will include an offset of `n_fft / 2`</span>
<span class="sd">        to counteract windowing effects when using a non-centered STFT.</span>

<span class="sd">    axis : int [scalar]</span>
<span class="sd">        The axis representing the time axis of X.</span>
<span class="sd">        By default, the last axis (-1) is taken.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    samples : np.ndarray [shape=(n,)]</span>
<span class="sd">        ndarray of sample indices corresponding to each frame of X.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    times_like : Return an array of time values to match the time axis from a feature matrix.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    Provide a feature matrix input:</span>

<span class="sd">    &gt;&gt;&gt; y, sr = librosa.load(librosa.util.example_audio_file())</span>
<span class="sd">    &gt;&gt;&gt; X = librosa.stft(y)</span>
<span class="sd">    &gt;&gt;&gt; samples = librosa.samples_like(X)</span>
<span class="sd">    &gt;&gt;&gt; samples</span>
<span class="sd">    array([      0,     512,    1024, ..., 1353728, 1354240, 1354752])</span>

<span class="sd">    Provide a scalar input:</span>

<span class="sd">    &gt;&gt;&gt; n_frames = 2647</span>
<span class="sd">    &gt;&gt;&gt; samples = librosa.samples_like(n_frames)</span>
<span class="sd">    &gt;&gt;&gt; samples</span>
<span class="sd">    array([      0,     512,    1024, ..., 1353728, 1354240, 1354752])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">isscalar</span><span class="p">(</span><span class="n">X</span><span class="p">):</span>
        <span class="n">frames</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">frames</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="n">axis</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">frames_to_samples</span><span class="p">(</span><span class="n">frames</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="n">hop_length</span><span class="p">,</span> <span class="n">n_fft</span><span class="o">=</span><span class="n">n_fft</span><span class="p">)</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013--2018, librosa development team.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: 0.6.2
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Tags</dt>
            <dd><a href="../../../../0.4.1/index.html">0.4.1</a></dd>
            <dd><a href="../../../../0.4.2/index.html">0.4.2</a></dd>
            <dd><a href="../../../../0.4.3/index.html">0.4.3</a></dd>
            <dd><a href="../../../../0.5.0/index.html">0.5.0</a></dd>
            <dd><a href="../../../../0.5.1/index.html">0.5.1</a></dd>
            <dd><a href="../../../../0.6.0/index.html">0.6.0</a></dd>
            <dd><a href="../../../../0.6.1/index.html">0.6.1</a></dd>
            <dd><a href="time_frequency.html">0.6.2</a></dd>
            <dd><a href="../../../../v0.1.0/index.html">v0.1.0</a></dd>
            <dd><a href="../../../../v0.4.0/index.html">v0.4.0</a></dd>
        </dl>
        <dl>
            <dt>Branches</dt>
            <dd><a href="../../../../master/index.html">master</a></dd>
        </dl>
    </div>
</div>


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'0.6.2',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>